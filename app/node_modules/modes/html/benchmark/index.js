var fs = require('fs');

var normalParser = require('../parser');
var fastParser = require('../fast-parser');



function measure(label, fn) {
	console.time(label);
	var result = fn();
	console.timeEnd(label);
	return result;
}

function measureParser(name, parser, source) {
	return measure(name, function() {return parser.parse(source);});
}



var smallSource = fs.readFileSync('input/small.html', 'utf-8');
var bigSource = fs.readFileSync('input/big.html', 'utf-8');


try {
	console.log('small -----');
	console.log();

	measureParser('fast', fastParser, smallSource);
	measureParser('normal', normalParser, smallSource);

	console.log('big -----');
	console.log();

	measureParser('fast', fastParser, bigSource);
	measureParser('normal', normalParser, bigSource);
} catch (exception) {
	log(exception);
}
