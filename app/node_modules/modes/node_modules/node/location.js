var oop = require('oop').oop;

var Position = require('./position').Position;



var Location = oop.Class({
	name: 'Location',

	schema: {
		inputToSpec: {
			'Number': 'start'
		},
		properties: [
			{names: ['start', 'beginning', 'from'], ctor: Position},
			{names: ['end', 'stop', 'to'], ctor: Position}
		]
	},
	statics: {

		/**
		 * Converts the location into a string following the format
		 * <start.line>x<start.column>-><end.line>x<end.column>/<start.index>-><end.index>
		 * @param location {Location}
		 * @return String
		 */
		toJSON: function (location) {
			var start = location.start, end = location.end;

			var lineColumnOutput = null;
			if (start.line !== null && start.column !== null && end.line != null && end.column != null) {
				lineColumnOutput = start.line + "x" + start.column + "->" + end.line + "x" + end.column;
			}

			var indexesOutput = start.index + "->" + end.index;

			var parts = [];
			if (lineColumnOutput !== null) {
				parts.push(lineColumnOutput);
			}
			parts.push(indexesOutput);

			return parts.join('/');
		}
	}
});



exports.Location = Location;
